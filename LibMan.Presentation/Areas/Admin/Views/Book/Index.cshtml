@model List<Book>

<!-- Modal starts -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" style="display: none;" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Deletion</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<p>Are you sure you want to delete this entry?</p>
			</div>
			<div class="modal-footer">
				<a id="modalBox" type="button" asp-area="Admin" asp-controller="Book" asp-action="Delete" class="btn btn-danger">Submit</a>
				<button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
			</div>
		</div>
	</div>
</div>
<!-- Modal Ends -->

<div class="card mb-4">
	<div class="card-header">
		<svg class="svg-inline--fa fa-table me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="table" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M64 256V160H224v96H64zm0 64H224v96H64V320zm224 96V320H448v96H288zM448 256H288V160H448v96zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"></path></svg><!-- <i class="fas fa-table me-1"></i> Font Awesome fontawesome.com -->
		Book List
	</div>
	<div class="card-body">
		<a asp-area="Admin" asp-controller="Book" asp-action="Edit" class="btn btn-outline-success" role="button">New</a>
		<div class="datatable-wrapper datatable-loading no-footer sortable searchable fixed-columns">
			<div id="order-listing_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
				<table id="order-listing" class="table dataTable no-footer" aria-describedby="order-listing_info">
					<thead>
						<tr>
							<th class="sorting sorting_asc" tabindex="0" aria-controls="order-listing" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Order #: activate to sort column descending" style="width: 107.05px;">Id</th>

							<th class="sorting" tabindex="0" aria-controls="order-listing" rowspan="1" colspan="1" aria-label="Purchased On: activate to sort column ascending" style="width: 171.012px;">Title</th>

							<th class="sorting" tabindex="0" aria-controls="order-listing" rowspan="1" colspan="1" aria-label="Purchased On: activate to sort column ascending" style="width: 171.012px;">Genre</th>

							<th class="sorting" tabindex="0" aria-controls="order-listing" rowspan="1" colspan="1" aria-label="Purchased On: activate to sort column ascending" style="width: 171.012px;">Description</th>

							<th class="sorting" tabindex="0" aria-controls="order-listing" rowspan="1" colspan="1" aria-label="Purchased On: activate to sort column ascending" style="width: 171.012px;">Available</th>

							<th class="sorting" tabindex="0" aria-controls="order-listing" rowspan="1" colspan="1" aria-label="Purchased On: activate to sort column ascending" style="width: 171.012px;">Author</th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						@if (Model is not null && Model.Count() > 0)
						{
							@for (int i = 0; i < Model.Count(); i++)
							{
								<tr data-index="@i" class="odd">
									<td class="sorting_1">@Model[i].Id</td>
									<td>@Model[i].Title</td>
									<td>@Model[i].Genre</td>
									<td>@Model[i].Description</td>
									<td>@Model[i].IsAvailable</td>
									<td>@Model[i].Author.FullName</td>
									<td>
										<a asp-area="Admin" asp-controller="Book" asp-action="Edit" asp-route-id="@Model[i].Id" class="btn btn-outline-warning" role="button">Edit</a>
									</td>
									<td>
										<a asp-area="Admin" asp-controller="Book" asp-action="Delete" asp-route-id="@Model[i].Id" class="btn btn-outline-danger delete-btn" data-bs-toggle="modal" data-bs-target="#exampleModal" role="button">Delete</a>
									</td>
								</tr>
							}
						}
						else
						{
							<tr>
								<td>
									<span style="color: red; font-size: 24px;">Add some authors!</span>
								</td>
							</tr>
						}
					</tbody>
				</table>

			</div>
		</div>
	</div>
</div>

@section Scripts
{
	<script>
		const btns = document.querySelectorAll(".delete-btn");
		const modal = document.getElementById("modalBox");

		for(let i = 0; i < btns.length; i++) {
			btns[i].addEventListener("click", () => {
				let targetString = btns[i].getAttribute("href");
				modal.setAttribute("href", targetString);
			});
		}

	</script>
	<script src="~/admin/assets/vendors/datatables.net/jquery.dataTables.js"></script>
	<script src="~/admin/assets/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>

	<script src="~/admin/assets/js/modal-demo.js"></script>
	<script src="~/admin/assets/js/data-table.js"></script>
}